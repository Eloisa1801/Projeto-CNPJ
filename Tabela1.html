<!DOCTYPE html>
<html>
<head>
	<title>Tabela</title>
	<style>
		.row {
			display: flex;
		}

		.cell {
			width: 50px;
			height: 50px;
			border: 1px solid black;
			display: flex;
			justify-content: center;
			align-items: center;
			font-size: 20px;
		}

		.blue {
			background-color: rgb(99, 152, 202);
			color: #333;
            box-shadow: 0 0 10px #c2d8f7;
            transition: background-color 0.3s ease;
		}
        .cell:hover {
            background-color: #eee;
            color: #111;
            cursor: pointer;
            box-shadow: 0 0 10px 5px rgba(0, 0, 255, 0.5);
        }
        button {
			margin-top: 20px;
			padding: 10px;
			border: none;
			border-radius: 5px;
			background-color: blue;
			color: white;
			cursor: pointer;
			transition: all 0.3s ease;
		}

		button:hover {
			background-color: #2c3e50;
		}

        .cell-correct {
            background-color: #5cb85c; /* cor verde */
            color: #fff; /* Cor do texto branco */
            font-weight: bold; /* Texto em negrito */
            transition: all 0.2s ease-in-out; /* Efeito de transição suave */
            box-shadow: 0px 0px 10px #5cb85c; /* efeito de luminosidade */
            border: 2px solid #389738; /* borda verde */
        }

        .cell-incorrect {
            background-color: rgba(255, 0, 0, 0.3); /* cor de fundo vermelha com transparência */
            color: #fff; /* Cor do texto branco */
            font-weight: bold; /* Texto em negrito */
            transition: all 0.2s ease-in-out; /* Efeito de transição suave */
            box-shadow: 0px 0px 10px rgba(255, 0, 0, 0.3); /* efeito de luminosidade */
            border: 2px solid #ff0000; /* borda vermelha */
        }
        
	</style>
</head>
<body onload="colorizeTable()">
	<div class="container">
		<div class="table" id="table1"></div>
	</div>
     <button id="colorize-button" onclick="colorizeTable()">Atualizar</button>
     <button id="verify-button" onclick="verifyTable()">Verificar Resposta</button>
     
	<script>
		// Criando a tabela 1 com os números de 1 a 50
		var table1 = document.getElementById("table1");
		for (var i = 0; i < 5; i++) {
		  var row = document.createElement("div");
		  row.classList.add("row");
		  for (var j = 1; j <= 10; j++) {
		    var cell = document.createElement("div");
		    cell.classList.add("cell");
		    cell.innerHTML = i * 10 + j;
		    row.appendChild(cell);
		  }
		  table1.appendChild(row);
		}

		function colorizeTable() {
        // Criando a tabela 2 com números aleatórios entre 0 e 1
        var table2 = document.createElement("div");
            for (var i = 0; i < 5; i++) {
                var row = document.createElement("div");
                row.classList.add("row");
                var sequenceCount = 0; // Contador para controlar sequência de uns
                for (var j = 1; j <= 10; j++) {
                    var cell = document.createElement("div");
                    cell.classList.add("cell");
                    var randomNum = Math.round(Math.random());
                    // Verifica se já temos uma sequência de três uns seguidos
                    if (randomNum == 1) {
                        sequenceCount++;
                        if (sequenceCount > 3) {
                            // Gera novo número aleatório até que a sequência seja quebrada
                            while (randomNum == 1) {
                                randomNum = Math.round(Math.random());
                            }
                            sequenceCount = 0;
                        }
                    } else {
                        sequenceCount = 0;
                    }
                    cell.innerHTML = randomNum;
                    row.appendChild(cell);
                }
                table2.appendChild(row);
            }

        // Colorindo as células da tabela 1 de acordo com os valores da tabela 2
        var cells1 = document.querySelectorAll("#table1 .cell");
        var cells2 = table2.querySelectorAll(".cell");
        for (var i = 0; i < cells1.length; i++) {
            if (cells2[i].innerHTML == "1") {
            cells1[i].classList.add("blue");
            cells1[i].innerHTML = "";
            cells1[i].contentEditable = true;
            cells1[i].focus();
            
            // Adicionando o event listener para permitir apenas números
            cells1[i].addEventListener("keydown", function(event) {
                // Verifica se a tecla pressionada é um número
                if (!(event.key >= "0" && event.key <= "9") && event.keyCode !== 8 && event.keyCode !== 46) {
                event.preventDefault();
                }
            });

            } else {
            cells1[i].classList.remove("blue");
            cells1[i].innerHTML = i + 1;
            cells1[i].contentEditable = false;
            }
        }
        }

        // Obtendo o botão e adicionando um evento
        var colorizeButton = document.getElementById("colorize-button");
        colorizeButton.addEventListener("click", colorizeTable);


        function validateTable() {
        var cells1 = document.querySelectorAll("#table1 .cell");
        for (var i = 0; i < cells1.length; i++) {
            if (cells1[i].innerHTML != i + 1) {
            return false; // Se a célula não estiver preenchida corretamente, retorna false
            }
        }
        return true; // Se todas as células estiverem preenchidas corretamente, retorna true
        }

        function verifyTable() {
            // Verifica se todas as células estão preenchidas
            var cells1 = document.querySelectorAll("#table1 .cell");
            var isTableComplete = true;
            for (var i = 0; i < cells1.length; i++) {
                if (cells1[i].innerHTML === "") {
                isTableComplete = false;
                break;
                }
            }

            if (!isTableComplete) {
                // Se não estiver completa, exibe um alerta
                alert("Por favor, finalize a sequência numérica.");
                return;
            }

            // Remove todas as classes de estilo adicionadas anteriormente
            cells1.forEach(function (cell) {
                cell.classList.remove("correct", "incorrect", "animated", "flash", "pulse", "border-danger", "border-success");
            });

            var isTableCorrect = true;
            for (var i = 0; i < cells1.length; i++) {
                var cell1Value = cells1[i].innerHTML;
                var cell1CorrectValue = i + 1;

                if (cell1Value == cell1CorrectValue) {
                cells1[i].classList.remove("cell-incorrect");
                cells1[i].classList.add("cell-correct", "animated", "flash", "border-success");
                } else {
                cells1[i].classList.remove("cell-correct");
                cells1[i].classList.add("cell-incorrect", "animated", "pulse", "border-danger");
                isTableCorrect = false;
                }
            }

            if (isTableCorrect) {
                // Se estiver correta, exibe um alerta
                alert("Parabéns, você preencheu a sequência numérica corretamente!");
            } else {
                // Se não estiver correta, exibe um alerta
                alert("Continue tentando.");
            }
        }

	</script>
</body>
</html>
